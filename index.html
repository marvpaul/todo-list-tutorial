<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>TODO-List</title>
    <meta name="viewport" content="width=device-width" />
  </head>
  <body>
    <div id="todolist">
      <h1>TODO</h1>
      <div><input id="new-todo" /><button onclick="addItem()">Add</button></div>
      <div id="new-items"></div>
    </div>
  </body>
</html>

<script>
  function loadItemsFromStorage() {
    const storedItems = JSON.parse(localStorage.getItem("todos")) || [];
    storedItems.forEach((item) => addItemToDOM(item));
  }

  function saveItemsToStorage(items) {
    localStorage.setItem("todos", JSON.stringify(items));
  }

  function addItem() {
    todoValue = document.getElementById("new-todo").value;

    addItemToDOM(todoValue);

    let items = JSON.parse(localStorage.getItem("todos")) || [];
    items.push(todoValue);
    saveItemsToStorage(items);

    document.getElementById("new-todo").value = "";
  }

  // Function to add item to the DOM
  function addItemToDOM(todoValue) {
    let newItemDiv = document.createElement("div");
    newItemDiv.className = "new-item";
    newItemDiv.id = todoValue;
    newItemDiv.innerHTML =
      todoValue +
      "<button onclick=\"deleteItem('" +
      todoValue +
      "')\">Delete</button>";

    var containerDiv = document.getElementById("new-items");
    containerDiv.appendChild(newItemDiv);
  }

  function deleteItem(todoValue) {
    document
      .getElementById("new-items")
      .querySelector("#" + todoValue)
      .remove();

    let items = JSON.parse(localStorage.getItem("todos")) || [];
    items = items.filter((item) => item !== todoValue);
    saveItemsToStorage(items);
  }
  window.onload = loadItemsFromStorage;
</script>

<style>
  #todolist {
    width: 80vw;
    text-align: center;
  }
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    /* Gradient from here: https://cssgradient.io/swatches/ */
    background: linear-gradient(90deg, #d53369 0%, #daae51 100%);
  }
</style>
